<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>LibroBuddy - Rare & Mysterious Books</title>
  <link rel="stylesheet" href="styles.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;600;700&family=Crimson+Text:ital,wght@0,400;0,600;1,400&display=swap" rel="stylesheet">
</head>
<body>
  <!-- ============================================ -->
  <!-- NAVIGATION BAR -->
  <!-- ============================================ -->
  <!-- Top navigation with logo, search, and user actions -->
  <nav class="navbar">
    <div class="container">
      <div class="nav-brand">
        <h1>LibroBuddy</h1>
        <p class="tagline">Purveyor of Rare & Mysterious Tomes</p>
      </div>
      
      <!-- Search bar for finding books -->
      <div class="nav-search">
        <input 
          type="text" 
          id="searchInput" 
          placeholder="Search books by title or author..."
          class="search-input"
        >
        <button onclick="searchBooks()" class="btn btn-search">Search</button>
      </div>

      <!-- User authentication buttons (Login/Register or User menu) -->
      <div class="nav-actions" id="navActions">
        <!-- Will be populated by JavaScript based on auth status -->
      </div>
    </div>
  </nav>

  <!-- ============================================ -->
  <!-- MAIN CONTAINER -->
  <!-- ============================================ -->
  <div class="container main-container">
    
    <!-- ============================================ -->
    <!-- AUTHENTICATION SECTION -->
    <!-- ============================================ -->
    <!-- Login and Registration forms (hidden when logged in) -->
    <div id="authSection" class="auth-section">
      
      <!-- Login Form -->
      <div class="auth-card">
        <h2>Login</h2>
        <form id="loginForm" onsubmit="login(event)">
          <div class="form-group">
            <label for="loginUsername">Username</label>
            <input 
              type="text" 
              id="loginUsername" 
              required 
              placeholder="Enter your username"
            >
          </div>
          <div class="form-group">
            <label for="loginPassword">Password</label>
            <input 
              type="password" 
              id="loginPassword" 
              required 
              placeholder="Enter your password"
            >
          </div>
          <button type="submit" class="btn btn-primary btn-block">Login</button>
        </form>
      </div>

      <!-- Registration Form -->
      <div class="auth-card">
        <h2>Register</h2>
        <form id="registerForm" onsubmit="register(event)">
          <div class="form-group">
            <label for="registerUsername">Username</label>
            <input 
              type="text" 
              id="registerUsername" 
              required 
              placeholder="Choose a username"
            >
          </div>
          <div class="form-group">
            <label for="registerEmail">Email</label>
            <input 
              type="email" 
              id="registerEmail" 
              required 
              placeholder="your.email@example.com"
            >
          </div>
          <div class="form-group">
            <label for="registerPassword">Password</label>
            <input 
              type="password" 
              id="registerPassword" 
              required 
              minlength="6"
              placeholder="At least 6 characters"
            >
          </div>
          <button type="submit" class="btn btn-primary btn-block">Register</button>
        </form>
      </div>
    </div>

    <!-- ============================================ -->
    <!-- MAIN CONTENT SECTION -->
    <!-- ============================================ -->
    <!-- Main app content (visible when logged in) -->
    <div id="mainContent" class="main-content" style="display: none;">
      
      <!-- Category Filter Tabs -->
      <div class="category-tabs" id="categoryTabs">
        <!-- Will be populated by JavaScript with categories from database -->
      </div>

      <!-- Admin Control Panel (only visible to admins) -->
      <div id="adminPanel" class="admin-panel" style="display: none;">
        <h2>Admin Controls</h2>
        <div class="admin-buttons">
          <button onclick="showAddBookForm()" class="btn btn-success">+ Add New Book</button>
          <button onclick="showAddCategoryForm()" class="btn btn-success">+ Add Category</button>
          <button onclick="viewOrders()" class="btn btn-info">View All Orders</button>
          <button onclick="viewStats()" class="btn btn-warning">Statistics</button>
        </div>
      </div>

      <!-- User Orders Button (for customers) -->
      <div id="customerPanel" class="customer-panel" style="display: none;">
        <button onclick="viewMyOrders()" class="btn btn-info">My Orders</button>
      </div>

      <!-- Books Grid -->
      <div id="booksGrid" class="books-grid">
        <!-- Will be populated by JavaScript with book cards -->
      </div>

      <!-- Shopping Cart (Fixed position) -->
      <div id="cartWidget" class="cart-widget" onclick="toggleCart()">
        ðŸ›’ Cart (<span id="cartCount">0</span>)
      </div>

      <!-- Cart Panel (Slides in from right) -->
      <div id="cartPanel" class="cart-panel">
        <div class="cart-header">
          <h2>Shopping Cart</h2>
          <button onclick="toggleCart()" class="btn-close">Ã—</button>
        </div>
        <div id="cartItems" class="cart-items">
          <!-- Cart items will be added here -->
        </div>
        <div class="cart-footer">
          <div class="cart-total">
            <strong>Total:</strong> $<span id="cartTotal">0.00</span>
          </div>
          <button onclick="checkout()" class="btn btn-success btn-block">Checkout</button>
        </div>
      </div>
    </div>

    <!-- ============================================ -->
    <!-- MODAL FOR BOOK DETAILS -->
    <!-- ============================================ -->
    <!-- Modal popup to show full book information -->
    <div id="bookModal" class="modal">
      <div class="modal-content">
        <span class="close" onclick="closeModal()">&times;</span>
        <div id="bookDetails">
          <!-- Book details will be loaded here -->
        </div>
      </div>
    </div>

    <!-- ============================================ -->
    <!-- MODAL FOR ADD/EDIT BOOK (Admin) -->
    <!-- ============================================ -->
    <div id="bookFormModal" class="modal">
      <div class="modal-content">
        <span class="close" onclick="closeBookFormModal()">&times;</span>
        <h2 id="bookFormTitle">Add New Book</h2>
        <form id="bookForm" onsubmit="saveBook(event)">
          <input type="hidden" id="bookFormId">
          
          <div class="form-group">
            <label for="bookTitle">Title *</label>
            <input type="text" id="bookTitle" required>
          </div>

          <div class="form-group">
            <label for="bookAuthor">Author *</label>
            <input type="text" id="bookAuthor" required>
          </div>

          <div class="form-group">
            <label for="bookISBN">ISBN *</label>
            <input type="text" id="bookISBN" required>
          </div>

          <div class="form-group">
            <label for="bookCategory">Category</label>
            <select id="bookCategory">
              <!-- Will be populated with categories -->
            </select>
          </div>

          <div class="form-group">
            <label for="bookDescription">Description</label>
            <textarea id="bookDescription" rows="3"></textarea>
          </div>

          <div class="form-row">
            <div class="form-group">
              <label for="bookPrice">Price * ($)</label>
              <input type="number" id="bookPrice" step="0.01" min="0" required>
            </div>

            <div class="form-group">
              <label for="bookStock">Stock Quantity *</label>
              <input type="number" id="bookStock" min="0" required>
            </div>
          </div>

          <div class="form-row">
            <div class="form-group">
              <label for="bookPublisher">Publisher</label>
              <input type="text" id="bookPublisher">
            </div>

            <div class="form-group">
              <label for="bookYear">Publication Year</label>
              <input type="number" id="bookYear" min="1000" max="2100">
            </div>
          </div>

          <div class="form-actions">
            <button type="submit" class="btn btn-primary">Save Book</button>
            <button type="button" onclick="closeBookFormModal()" class="btn btn-secondary">Cancel</button>
          </div>
        </form>
      </div>
    </div>

    <!-- ============================================ -->
    <!-- NOTIFICATION/ALERT AREA -->
    <!-- ============================================ -->
    <!-- Toast notifications for user feedback -->
    <div id="notification" class="notification"></div>

  </div>

  <!-- ============================================ -->
  <!-- JAVASCRIPT -->
  <!-- ============================================ -->
  <script src="app.js"></script>
</body>
</html>
